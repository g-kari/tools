# Product Requirements Document - Webツール集

## プロジェクト概要

Cloudflare Workers上で動作する開発者向けWebツール集。日常的に必要とする各種変換・チェック・生成ツールをブラウザ上で簡単に利用できるようにする。

## 技術スタック

- **ランタイム**: Cloudflare Workers
- **フレームワーク**: TanStack Start (React + TanStack Router)
- **言語**: TypeScript
- **ビルドツール**: Vite 7
- **UI**: Material Design 3準拠
- **アクセシビリティ**: WCAG 2.1準拠
- **テスト**: Vitest（ユニットテスト）、Playwright（E2Eテスト）

## 新規追加予定機能

### カテゴリ1: ネットワーク・セキュリティツール

#### Issue #96: HTTPレスポンスヘッダのセキュリティチェック機能
**概要**: 指定したURLのHTTPレスポンスヘッダをチェックし、セキュリティ関連のヘッダー（CSP, X-Frame-Options, HSTS等）の有無と設定値を検証する機能。

**要件**:
- URLを入力してヘッダーをチェック
- セキュリティヘッダーの有無を判定
- 推奨設定との比較
- 問題点の指摘と改善提案

#### Issue #94: 指定したURLのオープンポートチェック
**概要**: 指定したURLまたはIPアドレスの一般的なポート（80, 443, 22, 3306等）の開放状態をチェックする機能。

**要件**:
- URL/IPアドレス入力
- 主要ポートのスキャン
- 開放ポートの一覧表示
- セキュリティリスクの警告

### カテゴリ2: 単位・計算ツール

#### Issue #95: 単位計算
**概要**: 各種単位の相互変換機能（長さ、重さ、温度、データサイズ等）。

**要件**:
- 複数カテゴリの単位変換
- リアルタイム計算
- よく使う単位のクイックアクセス

### カテゴリ4: 画像処理ツール

#### Issue #82: 画像圧縮
**概要**: アップロードした画像を圧縮して容量を削減する機能。

**要件**:
- 画像ファイルのアップロード
- 圧縮率の調整
- プレビュー表示
- 圧縮前後のファイルサイズ比較
- ダウンロード機能

#### Issue #83: 画像リサイズ
**概要**: 画像のサイズ（幅・高さ）を変更する機能。

**要件**:
- 画像ファイルのアップロード
- 幅・高さの指定
- アスペクト比の維持オプション
- プレビュー表示
- ダウンロード機能

#### Issue #84: 画像トリミング
**概要**: 画像の一部を切り取る機能。

**要件**:
- 画像ファイルのアップロード
- ドラッグ＆ドロップでトリミング範囲指定
- プレビュー表示
- ダウンロード機能

#### Issue #78: base64変換（画像）
**概要**: 画像ファイルをBase64エンコードする機能。

**要件**:
- 画像ファイルのアップロード
- Base64文字列の生成
- Data URL形式での出力
- コピー機能

#### Issue #79: 透過画像生成
**概要**: 指定したサイズの透過PNG画像を生成する機能。

**要件**:
- 幅・高さの指定
- 透明度の調整
- 背景色の指定オプション
- ダウンロード機能

#### Issue #80: favicon生成
**概要**: 画像からfavicon（複数サイズ）を生成する機能。

**要件**:
- 元画像のアップロード
- 各種サイズ（16x16, 32x32, 48x48等）の自動生成
- .ico形式での出力
- 一括ダウンロード

#### Issue #81: からーピッカー
**概要**: カラーコードの取得・変換機能（HEX⇔RGB⇔HSL）。

**要件**:
- ビジュアルカラーピッカー
- 各種形式での表示（HEX, RGB, HSL, CMYK）
- カラーコードの相互変換
- カラーパレットの保存

### カテゴリ5: Discord/Slack用画像変換ツール

#### Issue #73: png,jpgなどをdiscordの絵文字にするやつ
**概要**: Discord・Slack用の絵文字画像を生成する機能。

**要件**:
- 画像ファイルのアップロード
- Discord/Slackの絵文字サイズ制限に自動調整
- テキスト埋め込み機能
- アニメーション効果（揺れる等）
- 透過処理
- プレビュー表示
- ダウンロード機能

#### Issue #72: png,jpgなどをdiscordのスタンプにするやつ
**概要**: Discord・Slack用のスタンプ画像を生成する機能。

**要件**:
- 画像ファイルのアップロード
- Discord/Slackのスタンプサイズ制限に自動調整
- プレビュー表示
- ダウンロード機能

#### Issue #115: 動画変換時の出力形式に、GIFなどのアニメーション画像も選べるように
**概要**: 動画ファイルをGIFアニメーション等に変換する機能。

**要件**:
- 動画ファイルのアップロード
- GIF形式への変換
- フレームレート調整
- サイズ調整
- プレビュー表示
- ダウンロード機能

### カテゴリ6: コード処理・変換ツール

#### Issue #19: HTML変換
**概要**: HTMLのエスケープ/アンエスケープ、整形機能。

**要件**:
- HTMLコードの入力
- エスケープ/アンエスケープ
- コード整形
- プレビュー表示

#### Issue #75: phpシリアライズ変換
**概要**: PHPのserialize/unserialize処理をJavaScriptで実現する機能。

**要件**:
- シリアライズ/デシリアライズ変換
- JSON⇔PHPシリアライズ形式の相互変換
- 入力値の検証

#### Issue #74: msgpack変換
**概要**: MessagePack形式とJSONの相互変換機能。

**要件**:
- JSON⇔MessagePack変換
- バイナリデータの可視化
- コピー機能

### カテゴリ7: 暗号化ツール

#### Issue #93: 暗号化 opt salt
**概要**: テキストの暗号化・復号化機能（salt対応）。

**要件**:
- 各種暗号化アルゴリズム対応（AES, SHA等）
- saltオプション
- 暗号化/復号化
- 結果のコピー機能

### カテゴリ8: その他

#### Issue #107: サイトのOGP
**概要**: 各機能ページごとの専用OGP画像の作成・設定。

**要件**:
- 各ツールページごとにカスタムOGP画像を用意
- 動的OGP生成機能
- SNSシェア時のプレビュー最適化

#### Issue #76: GoogleAdもしくは何かしらの広告
**概要**: サイトへの広告配置による収益化。

**要件**:
- Google AdSenseまたは他の広告プラットフォームの統合
- UXを損なわない広告配置
- 広告ブロック検知

#### Issue #64: 特定のOGPのタイトルなどが文字化けする（バグ修正）
**概要**: OGPチェッカーで特定のサイトの文字エンコーディングが正しく処理されない問題の修正。

**要件**:
- 文字エンコーディングの自動検出改善
- 各種文字コード対応（UTF-8, Shift_JIS, EUC-JP等）
- 文字化け時のフォールバック処理

## 非機能要件

### デザイン
- Material Design 3のカラーシステムを使用
- アクセシビリティを考慮（ARIAラベル、キーボードナビゲーション）
- レスポンシブデザイン対応
- 日本語UIをメインにサポート
- インラインスタイルの禁止（CSSファイルで定義）
- alert()メソッドの使用禁止（トースト通知を使用）

### セキュリティ
- SSRF対策
- XSS対策
- CSP設定
- 適切なタイムアウト設定

### パフォーマンス
- Cloudflare Workersのエッジ配信
- 最小限のバンドルサイズ
- 遅延読み込み対応

### テスト
- ユニットテストカバレッジ維持
- E2Eテスト実装必須
- ドキュメントカバレッジ80%以上

## 優先順位

### High Priority（優先度：高）
1. HTTPレスポンスヘッダのセキュリティチェック機能 (#96)
2. OGPの文字化けバグ修正 (#64)

### Medium Priority（優先度：中）
1. 画像圧縮 (#82)
2. 画像リサイズ (#83)
3. base64変換（画像） (#78)
4. カラーピッカー (#81)
5. 単位計算 (#95)

### Low Priority（優先度：低）
1. Discord絵文字生成 (#73)
2. Discordスタンプ生成 (#72)
3. 動画→GIF変換 (#115)
4. 画像トリミング (#84)
5. 透過画像生成 (#79)
6. favicon生成 (#80)
7. HTML変換 (#19)
8. phpシリアライズ変換 (#75)
9. msgpack変換 (#74)
10. 暗号化機能 (#93)
11. オープンポートチェック (#94)
12. サイトOGP画像作成 (#107)
13. 広告統合 (#76)
